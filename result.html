<!DOCTYPE html>

<body>
    <table border="1">
        <tr>
            <td>기초 대사량</td>
            <td id="kcal"></td>
        </tr>
        <tr>
            <td>필요 단백질</td>
            <td id="protein"></td>
            <td id="proteinkcal"></td>
        </tr>
        <tr>
            <td>필요 탄수화물</td>
            <td id="carbon"></td>
            <td id="carbonkcal"></td>
        </tr>
        <tr>
            <td>필요 지방</td>
            <td id="fat"></td>
            <td id="fatkcal"></td>
        </tr>
        <tr>
            <td>활동량</td>
            <td id="activehour"></td>
        </tr>
        <tr>
            <td>활동 대사량</td>
            <td id="totalkcal"></td>
        </tr>
    </table>
    <label>식단의 목적 : </label>
    <input type="radio" id="decrease" name="whatyourdiet" onclick="setKcalDecrease()">
    <label>다이어트</label>
    <input type="radio" id="maintain" name="whatyourdiet" onclick="setKcalMaintain()" checked="true">
    <label>유지</label>
    <input type="radio" id="increase" name="whatyourdiet" onclick="setKcalIncrease()">
    <label>증량</label>
</body>

<script>
    const id = localStorage.getItem("id");
    const age=localStorage.getItem(id+".age")
    const height=localStorage.getItem(id+".height");
    const weight=localStorage.getItem(id+".weight");
    const muscle=localStorage.getItem(id+".muscle");
    const sex=localStorage.getItem(id+".sex");
    const activehour=localStorage.getItem(id+".activehour");
    const objective=localStorage.getItem(id+".objective");

    var BMC=0
    var Act_BMC=0



    function setKcalDecrease(){
        localStorage.setItem(id+".objective")="다이어트"
        location.assign("result.html")
    }
    function setKcalMaintain(){
        localStorage.setItem(id+".objective")="유지"
        location.assign("result.html")
    }
    function setKcalIncrease(){
        localStorage.setItem(id+".objective")="증량"
        location.assign("result.html")
    }

    if (muscle===0){
        if (sex==="남자"){
            muscle=28
        }
        else{
            muscle=20
        }
    }

    if(sex=="남자"){
        BMC = 66.47 + (13.75 * weight) + (5 * height) - (6.76 * age)
    }
    else{
        BMC = 665.1 + (9.56 * weight) + (1.85 * height) - (4.68 * age)
    }

    if(activehour<2){
        Act_BMC= BMC * 1.3
        document.getElementById("activehour").innerText= "낮음"
    }
    else if(activehour<5){
        Act_BMC=BMC * 1.5
        document.getElementById("activehour").innerText= "중간"
    }
    else if(activehour>=5){
        Act_BMC=BMC * 1.75
        document.getElementById("activehour").innerText= "높음"
    }

    if (localStorage.getItem(id+".objective")=="다이어트"){
        Act_BMC=Act_BMC-500
    }
    if(localStorage.getItem(id+".objective")=="증량"){
        if(document.getElementById.innerText=="낮음"){
            Act_BMC= Act_BMC + 300
            document.getElementById("decrease").checked=true
        }
        if(document.getElementById.innerText=="중간"){
            Act_BMC= Act_BMC + 400
            document.getElementById("maintain").checked=true
        }
        if(document.getElementById.innerText=="높음"){
            Act_BMC= Act_BMC + 500
            document.getElementById("increase").checked=true
        }
    }
    const my_protein = weight * 2 // 섭취 단백질 g
    const protein = my_protein * 4 // 단백질 kcal
    const BMC_1 = Act_BMC - protein // 단백질 칼로리를 제외한 활동 칼로리
    const carb = BMC_1 * 0.7 // 탄수화물 kcal
    const fat = BMC_1 * 0.3 // 지방 kcal
    const my_carb = carb / 4 // 탄수화물 g
    const my_fat = fat / 9 // 지방 g

    
    document.getElementById("kcal").innerText= Math.ceil(BMC) + "kcal"
    document.getElementById("protein").innerText= Math.ceil(my_protein) + "g" ;
    document.getElementById("proteinkcal").innerText= Math.ceil(protein) + "kcal" ;
    document.getElementById("carbon").innerText= Math.ceil(my_carb) + "g" ;
    document.getElementById("carbonkcal").innerText= Math.ceil(carb) + "kcal"
    document.getElementById("fat").innerText= Math.ceil(my_fat) + "g" ;
    document.getElementById("fatkcal").innerText= Math.ceil(fat) + "kcal"
    document.getElementById("totalkcal").innerText= Math.ceil(Act_BMC) + "kcal"

</script>
